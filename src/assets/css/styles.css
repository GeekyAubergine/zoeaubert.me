@tailwind base;
@tailwind components;
@tailwind utilities;

@layer components {
    /* ---------------- Core ---------------- */

    html {
        font-size: 16px;
    }

    * {
        font-family: 'Atkinson Hyperlegible', sans-serif, ui-sans-serif,
            system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
            'Helvetica Neue', Arial, 'Noto Sans', sans-serif,
            'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
            'Noto Color Emoji';
        font-display: swap;
    }

    body {
        @apply bg-background dark:bg-background-dark;
    }

    /* ----------------  Utilities ---------------- */

    .width-control {
        @apply w-[68ch] max-w-[100%];
    }

    .text {
        @apply text-text dark:text-text-dark tabular-nums break-words leading-[1.75rem];
    }

    .accent {
        @apply text-accent dark:text-accent-dark decoration-accent dark:decoration-accent-dark;
    }

    .no-accent {
        @apply text-text dark:text-text-dark decoration-text dark:decoration-text-dark;
    }

    .under {
        @apply underline;
        text-underline-offset: 0.1em;
    }

    .link {
        @apply under text-accent dark:text-accent-dark decoration-accent dark:decoration-accent-dark;
    }

    .secondary {
        @apply !text-secondary dark:!text-secondary-dark;
    }

    .wide {
        /* @apply mx-auto p-2 max-w-[102ch]; */
    }

    main {
        @apply w-full px-4 py-2;
    }

    hr {
        @apply border-border dark:border-border-dark my-6 mx-0 last-of-type:hidden;
    }

    div,
    nav,
    footer,
    article {
        @apply flex flex-col;
    }

    /* ----------------  Typography ---------------- */

    h1,
    h2,
    h3,
    h4,
    h5,
    h6,
    p,
    a,
    time {
        @apply text;
    }

    h1, h2, h3, h4, h5, h6, p, a, ul, ol, li, blockquote, img, pre {
        @apply my-3;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        @apply font-bold mt-6 mb-0;
    }

    h1 {
        @apply text-2xl mt-0;
    }

    h2 {
        @apply text-xl;
    }

    h3 {
        @apply text-lg;
    }

    h4,
    h5,
    h6 {
        @apply text-lg;
    }

    a {
        @apply accent under;
    }

    ol {
        @apply list-decimal list-inside;
    }

    ul {
        @apply list-disc list-inside;
    }

    li {
        @apply my-2;
    }

    blockquote {
        @apply border-l-4 border-accent dark:border-accent-dark pl-4;
    }

    :not(pre) > code {
        @apply bg-code dark:bg-code-dark pt-[.05rem] pb-[.1rem] px-[.3rem] rounded !font-normal;
        font-size: 90%;
    }

    pre {
        @apply bg-code dark:bg-code-dark pt-[.05rem] pb-[.1rem] px-[.3rem] rounded !font-normal overflow-x-scroll;
        font-size: 90%;
    }

    /* ----------------  Common ---------------- */

    .date-and-readtime {
        @apply secondary mt-2;

        & time {
            @apply secondary;
        }

        & span {
            @apply secondary;
        }

        & p {
            @apply secondary my-0;
        }
    }

    .tags-list {
        @apply flex-row flex-wrap;

        & .tag {
            @apply secondary under link mr-2 my-0 py-0 last-of-type:mr-0;
        }
    }

    .image-wrapper {
        /* @apply block max-w-full h-auto max-h-full mx-auto !object-contain; */
        /* margin-block-end: 1em; */
    }

    .header-link-icon {
        /* @apply mt-9 h-5 flex items-center; */
    }

    .photogrid {
        @apply w-full grid gap-x-2 gap-y-4 mx-auto px-0 grid-cols-2 sm:grid-cols-4 sm:gap-y-2 md:grid-cols-6;
        img {
            @apply m-0;
        }
    }

    nav {
        @apply width-control mx-auto justify-center items-baseline my-2;

        & .name-with-side {
            @apply w-full flex-row width-control justify-between items-center md:flex-row md:justify-between;

            & .name-and-toggle {
                @apply flex-row text-3xl items-center font-normal;

                & .name {
                    @apply text-4xl h-full text-left my-0 mr-4 no-underline;
                }
            }

            & .side-links {
                @apply flex-row w-full justify-between hidden;
            }

            & .mobile-link-toggle {
                @apply h-8 flex justify-end items-center md:hidden;

                & p {
                    @apply text-center m-0 p-0 text-3xl accent;
                }
            }
        }

        & .links-container {
            @apply w-full mt-1;
        }

        & .mobile-links {
            @apply flex-row flex-wrap w-full justify-evenly mt-0;

            & .link {
                @apply min-w-[33%] text-center my-1 no-underline;
            }
        }

        & .link {
            @apply accent;
        }
    }

    footer {
        @apply max-w-full width-control mt-12 p-2 mx-auto items-center border-t border-t-border;

        & a {
            @apply my-0;
        }

        & > div {
            @apply flex-row flex-wrap justify-center my-2;
        }

        & p {
            @apply mx-0.5 my-0 text-center;
        }

        & span {
            @apply text mx-2 my-0;
        }
    }

    /* ----------------  Page specific ---------------- */

    .albumPhotoPageContainer {
        max-height: calc(100vh - 5rem);

        img {
            max-height: calc(100vh - 30rem);
            max-width: 100%;
        }
    }

    .hobbyGridItemImage {
        @apply border-[#00000000] border-2 hover:border-accent dark:hover:border-accent-dark rounded-md;
    }

    .homePageBlock {
        @apply mb-6;

        & h2 {
            @apply mb-3;
        }

        & .see-more {
            @apply mt-0;
        }
    }

    .blogPostItem {
        @apply mb-4 flex-col sm:flex-row;

        & a {
            @apply flex flex-1 no-underline my-0;
        }

        & h3 {
            @apply text-lg font-normal my-0 accent;
        }

        & time {
            @apply flex secondary;
        }
    }
}
