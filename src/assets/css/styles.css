@tailwind base;
@tailwind components;
@tailwind utilities;

@layer components {
    /* ---------------- Core ---------------- */

    html {
        font-size: 16px;
    }

    * {
        font-family: 'Atkinson Hyperlegible', sans-serif, ui-sans-serif,
            system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
            'Helvetica Neue', Arial, 'Noto Sans', sans-serif,
            'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
            'Noto Color Emoji';
        font-display: swap;
    }

    body {
        @apply bg-background dark:bg-background-dark;
    }

    .width-control {
        @apply w-[68ch] max-w-[100%];
    }

    .text {
        @apply text-text dark:text-text-dark tabular-nums break-words leading-[1.75rem];
    }

    .accent {
        @apply text-accent dark:text-accent-dark decoration-accent dark:decoration-accent-dark;
    }

    .under {
        @apply underline;
        text-underline-offset: 0.1em;
    }

    .link {
        @apply hover:under hover:text-accent dark:hover:text-accent-dark hover:decoration-accent dark:hover:decoration-accent-dark;
    }

    .secondary {
        @apply !text-secondary dark:!text-secondary-dark;
    }

    .wide {
        /* @apply mx-auto p-2 max-w-[102ch]; */
    }

    main {
        @apply w-full px-4 py-2;
    }

    hr {
        @apply border-border dark:border-border-dark my-6 mx-0 last-of-type:hidden;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6,
    p,
    a,
    time {
        @apply text;
    }

    div,
    nav,
    footer,
    article {
        @apply flex flex-col;
    }

    /* ---------------- Content ---------------- */

    .h1 {
        @apply text-4xl font-bold mb-0;
    }

    h1 {
        @apply h1;
    }

    .content {
        @apply prose prose-stone prose-zoe dark:prose-invert max-w-none;
        @apply prose-code:rounded prose-code:pt-[.1rem] prose-code:pb-[.15rem] prose-code:px-[.35rem] prose-code:before:content-[] prose-code:after:content-[];

        & h1 {
            @apply h1;
        }

        & h2,
        & h3,
        & h4,
        & h5,
        & h6 {
            @apply mt-12 mb-0;
        }

        & p {
            @apply my-4;
        }

        & ul,
        & ol {
            @apply mt-0 mb-6;
        }

        & a {
            @apply under link;
        }

        & blockquote {
            @apply my-4;
        }

        & blockquote p {
            @apply my-2;
        }

        & img {
            @apply my-4;
        }
    }

    :not(pre) > code {
        @apply bg-code dark:bg-code-dark pt-[.05rem] pb-[.1rem] px-[.3rem] rounded !font-normal;
        font-size: 90%;
    }

    /* ----------------  Common ---------------- */
    
    .date-and-readtime {
        @apply secondary mt-2;

        & time {
            @apply secondary;
        }

        & span {
            @apply secondary;
        }

        & p {
            @apply secondary my-0;
        }
    }

    .tags-list {
        @apply flex-row flex-wrap;

        & .tag {
            @apply secondary under link mr-2 my-0 py-0 last-of-type:mr-0;
        }
    }

    .mainPageHeading {
        @apply text-2xl font-bold mb-2;
    }

    .mainPageBlock {
        @apply my-6;
    }

    .image-wrapper {
        /* @apply block max-w-full h-auto max-h-full mx-auto !object-contain; */
        /* margin-block-end: 1em; */
    }

    .header-link-icon {
        /* @apply mt-9 h-5 flex items-center; */
    }

    .photogrid {
        @apply w-full grid gap-x-2 gap-y-4 mx-auto px-0 grid-cols-2 sm:grid-cols-4 sm:gap-y-2 md:grid-cols-6;
        img {
            @apply m-0;
        }
    }

    nav {
        @apply width-control mx-auto justify-center items-baseline my-2;

        & .name-with-side {
            @apply w-full flex-row width-control justify-between items-center md:flex-row md:justify-between;

            & .name-and-toggle {
                @apply flex-row text-3xl items-center font-normal;

                & .name {
                    @apply text-4xl h-full text-left mr-4;
                }
            }

            & .side-links {
                @apply flex-row w-full justify-between hidden;
            }

            & .mobile-link-toggle {
                @apply h-8 flex justify-end items-center md:hidden;
                
                & p {
                    @apply text-center m-0 p-0 text-3xl accent;
                }
            }
        }

        & .mobile-links {
            @apply flex-row flex-wrap w-full justify-evenly mt-5;

            & .link {
                @apply min-w-[33%] text-center;
            }
        }

        & .link {
            @apply accent;
        }
    }

    footer {
        @apply max-w-full width-control mt-12 p-2 mx-auto items-center border-t border-t-border content;

        & > div {
            @apply flex-row flex-wrap justify-center my-2;
        }


        & p {
            @apply mx-0.5 my-0 text-center;
        }

        & span {
            @apply text mx-2 my-0;
        }
    }

    /* ----------------  Page specific ---------------- */

    .albumPhotoPageContainer {
        max-height: calc(100vh - 5rem);

        img {
            max-height: calc(100vh - 30rem);
            max-width: 100%;
        }
    }

    .hobbyGridItemImage {
        @apply border-[#00000000] border-2 hover:border-accent dark:hover:border-accent-dark rounded-md;
    }
}
