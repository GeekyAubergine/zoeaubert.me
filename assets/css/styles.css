@tailwind base;
@tailwind components;
@tailwind utilities;

/* @font-face {
    font-family: 'Atkinson Hyperlegible';
    src: url('/assets/fonts/Atkinson-Hyperlegible-Regular-102a.woff2')
        format('woff2');
}

@font-face {
    font-family: 'Atkinson Hyperlegible';
    src: url('/assets/fonts/Atkinson-Hyperlegible-Bold-102a.woff2')
        format('woff2');
    font-weight: bold;
}

@font-face {
    font-family: 'Atkinson Hyperlegible';
    src: url('/assets/fonts/Atkinson-Hyperlegible-Italic-102a.woff2')
        format('woff2');
    font-style: italic;
}

@font-face {
    font-family: 'Atkinson Hyperlegible';
    src: url('/assets/fonts/Atkinson-Hyperlegible-BoldItalic-102a.woff2')
        format('woff2');
    font-weight: bold;
    font-style: italic;
}

@font-face {
    font-family: 'WilcoLoftSans';
    src: url('/assets/fonts/WilcoLoftSans-Treble.woff2') format('woff2');
} */

@keyframes blink {
    0% {
        opacity: 0;
    }
    50% {
        opacity: 1;
    }
    100% {
        opacity: 0;
    }
}

@layer components {
    /* ---------------- Core ---------------- */

    html {
        @apply text-[16px];
    }

    * {
        font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI',
            Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif,
            'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
            'Noto Color Emoji';
        font-display: swap;
    }

    body {
        @apply bg-background dark:bg-background-dark;
    }

    /* ----------------  Utilities ---------------- */

    .width-control {
        @apply w-[68ch] max-w-[100%] px-4 md:px-0;
    }

    .text {
        @apply text-text dark:text-text-dark tabular-nums break-words leading-[1.75rem];
        text-wrap: pretty;
    }

    .accent {
        @apply text-accent dark:text-accent-dark decoration-accent dark:decoration-accent-dark;
    }

    .no-accent {
        @apply text-text dark:text-text-dark decoration-text dark:decoration-text-dark;
    }

    .under {
        @apply underline hover:!underline;
        text-underline-offset: 0.15em;
        text-decoration-thickness: 1px;
    }

    .link {
        @apply under text-accent dark:text-accent-dark decoration-accent dark:decoration-accent-dark;
    }

    .secondary {
        @apply !text-secondary dark:!text-secondary-dark !decoration-secondary dark:!decoration-secondary-dark;
    }

    .border-color {
        @apply border-border dark:border-border-dark;
    }

    main {
        @apply w-full;
    }

    hr {
        @apply border-border dark:border-border-dark my-4 mx-0;
    }

    div,
    nav,
    footer,
    article {
        @apply flex flex-col;
    }

    /* ----------------  Typography ---------------- */

    h1,
    h2,
    h3,
    h4,
    h5,
    h6,
    p,
    a,
    time,
    li {
        @apply text;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6,
    p,
    a,
    li,
    blockquote,
    img,
    pre {
        @apply my-2;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        @apply mt-8 mb-0 font-bold mr-4 sm:mr-0;
    }

    h1 {
        @apply text-4xl sm:text-5xl;
    }

    h2 {
        @apply text-2xl;
    }

    h3,
    h4,
    h5,
    h6 {
        @apply text-xl;
    }

    a {
        @apply accent under;
    }

    ol {
        @apply list-decimal list-outside ml-4;
    }

    ul {
        @apply list-disc list-outside ml-4;
    }

    li > ul > li,
    li > ol > li {
        @apply ml-4;
    }



    blockquote {
        @apply border-l-4 border-accent dark:border-accent-dark pl-4;
    }

    :not(pre) > code {
        @apply bg-code dark:bg-code-dark pt-[.05rem] pb-[.1rem] px-[.3rem] rounded !font-normal;
        font-family: 'Fira Code', 'JetBrains Mono', 'Source Code Pro',
            'Courier New', monospace;
    }

    pre {
        @apply bg-code-dark pt-[.45rem] pb-[.5rem] px-[.6rem] rounded !font-normal overflow-x-auto;
        font-family: 'Fira Code', 'JetBrains Mono', 'Source Code Pro',
            'Courier New', monospace;
    }

    p:first-of-type {
        @apply mt-0;
    }

    p > img {
        @apply mx-auto;
    }

    img {
        @apply text-text dark:text-text-dark;
    }

    pre > code {
        @apply text-text-dark;
    }

    /* ----------------  Common ---------------- */

    .date-and-readtime {
        @apply secondary mt-2;

        & time {
            @apply secondary;
        }

        & span {
            @apply secondary;
        }

        & p {
            @apply secondary my-0;
        }
    }

    .tags-list {
        @apply flex-row flex-wrap;

        & .tag {
            @apply secondary under link mr-2 my-0 py-0 last-of-type:mr-0;
        }
    }

    .image-wrapper {
        /* @apply block max-w-full h-auto max-h-full mx-auto !object-contain; */
        /* margin-block-end: 1em; */
    }

    .header-link-icon {
        /* @apply mt-9 h-5 flex items-center; */
    }

    nav {
        @apply width-control mx-auto pt-2 mb-6 sm:flex-row sm:justify-end sm:items-baseline sm:py-4;

        & .name-and-toggle {
            @apply w-full flex-row justify-between items-center font-normal sm:justify-start;

            & .name {
                @apply text-2xl h-full text-left mr-2 no-underline mt-0 mb-1 sm:my-1 sm:text-3xl;

                &:hover {
                    .forename,
                    .surname {
                        @apply under;
                    }
                }

                & .forename {
                    @apply no-underline;
                }

                & .surname {
                    @apply sm:hidden md:inline-flex;
                }
            }
        }

        & .links {
            @apply flex-row justify-between;

            & .link {
                @apply mx-0 my-0 accent text-lg !no-underline hover:!under sm:mx-2 sm:last-of-type:mr-0;
            }
        }

        /* & .links {
            @apply flex-row w-full justify-evenlytly mt-1 sm:w-auto sm:justify-end;

            & .link {
                @apply flex-1 max-w-[5rem] justify-center mx-0 my-0 text-center accent !no-underline hover:!under text-lg sm:last-of-type:mr-0;
            }
        } */
    }

    #theme-toggle {
        @apply w-5 h-5 sm:mt-[0.25rem];

        #toggle-button {
            @apply cursor-pointer text-neutral-400 dark:text-neutral-500 rotate-180 dark:rotate-0 transition-all duration-100;
        }
    }

    footer {
        @apply mt-[10rem] pt-8 pb-6 px-4 items-center bg-accent;

        nav {
            @apply width-control mx-auto my-0 p-0 grid grid-cols-2 gap-y-16 gap-x-8 sm:grid-cols-3 md:grid-cols-4;

            & .link-group {
                @apply flex-col;

                & h3 {
                    @apply text-text-dark mt-0 font-bold text-2xl;
                }

                & ul {
                    @apply list-none ml-0;

                    & li {
                        & a {
                            @apply text-text-dark !no-underline hover:!under;
                            text-decoration-color: white;
                        }
                    }
                }
            }
        }
    }

    .blog-posts {
        & .blog-post-item {
            @apply my-4 first-of-type:mt-0;

            & .title-and-date {
                @apply flex-col justify-between items-baseline md:flex-row md:items-baseline;

                & .date {
                    @apply secondary;
                }

                & a {
                    @apply flex flex-1 my-0 no-underline;
                }
            }

            & h3 {
                @apply accent mt-0 text-2xl pr-8 sm:pr-0 font-normal;
            }

            & .description {
                /* @apply hidden md:inline-flex; */
            }

            & .time-to-read {
                @apply hidden secondary mt-0 md:inline-flex;
            }

            p {
                @apply mt-2;
            }
        }
    }

    .page-header {
        @apply w-full mt-0 mb-8 sm:justify-center sm:mt-[2rem] sm:mb-[4.5rem] sm:items-center;

        & h1 {
            @apply sm:text-center sm:max-w-[80%] mt-0;
        }
    }

    /* ----------------  Page specific ---------------- */

    .albumPhotoPageContainer {
        max-height: calc(100vh - 5rem);

        & img {
            max-height: calc(100vh - 30rem);
            max-width: 100%;
        }
    }

    .hobbyGridItemImage,
    .border-hover-accent {
        @apply border-[#00000000] border-2 hover:border-accent dark:hover:border-accent-dark rounded-md;
    }

    .home-header {
        @apply items-center md:mb-[4.5rem];

        .name-and-cursor {
            @apply flex-row justify-center items-baseline h-[6rem];

            .home-name {
                @apply text-[3rem] md:text-[5rem] m-0 text-center max-w-full;
            }

            .name-cursor {
                @apply ml-[.01rem] h-[2.2rem] md:h-[3.5rem] mt-4 md:mt-6 border-r-2 border-text dark:border-text-dark min-w-[1px];

                animation: blink 800ms linear infinite;
            }
        }
    }

    .home-about {
        @apply mb-8 text-lg;
    }

    .home-page-block {
        @apply my-2;

        & h2 {
            @apply mt-4 mb-4;
        }

        & .see-more {
            @apply mt-2;
        }
    }

    .omni-post {
        @apply py-4 first-of-type:pt-0 flex-row;

        a {
            @apply !no-underline hover:under;
        }

        h2 {
            @apply mt-0 mb-4 text-3xl;
        }

        .timestamp {
            @apply mt-0 mb-3 !no-underline hover:under;

            & > time {
                @apply accent text-xl font-bold uppercase;
            }
        }

        & .media {
            @apply flex flex-row justify-start md:my-4 mx-auto;

            & > .media-grid {
                @apply sm:grid gap-2 grid-cols-1 md:grid-cols-2 overflow-hidden;
            }
            & img {
                @apply w-full object-contain md:my-0 max-h-[44rem];
            }
        }

        & :not(.media) img {
            @apply mx-auto;
        }

        .album-photo-media {
            @apply mb-0;
        }

        .album-description {
            @apply mt-0 text-center;
        }

        .content {
            @apply w-full;
        }

        .image {
            @apply max-w-[6rem] min-w-[6rem] md:max-w-[10rem] md:min-w-[10rem] ml-2;
        }

        .tags-list {
            @apply mt-2;
        }
    }

    .media-grid {
        @apply w-full grid gap-x-2 gap-y-4 mx-auto px-0 grid-cols-2 sm:grid-cols-4 sm:gap-y-2 md:grid-cols-6;
        grid-auto-rows: 1fr;

        & .grid-element {
            @apply flex flex-col justify-center items-center;
        }

        & .landscape {
            @apply col-span-2 row-span-1;
        }

        & .portrait {
            @apply col-span-1 row-span-1 object-cover my-[-4%];

            & img {
                @apply h-[92%];
            }
        }

        & .square {
            @apply col-span-2 row-span-1 object-cover;
        }

        & img,
        & a {
            @apply m-0 p-0 max-h-full;
        }

        & a {
            @apply flex justify-center items-center;
        }
    }

    .half-size-media-grid {
        @apply grid-cols-4 sm:grid-cols-8 md:grid-cols-10;
    }

    .micro-post {
        & .media {
            @apply flex flex-row justify-start mb-6;

            & > .media-grid {
                @apply grid gap-x-1 grid-cols-2 overflow-hidden;
            }
            & img {
                @apply w-full h-full object-contain;
            }
        }

        .tags-list {
            @apply mt-2;
        }

        .original-link {
            @apply mt-6;
        }
    }

    .wide {
        @apply w-[102ch] max-w-[100%] px-4 mx-auto;
    }

    .album-grid {
        @apply grid gap-x-2 gap-y-2 grid-cols-1 sm:grid-cols-2 xl:grid-cols-2 mb-8;

        & .album {
            @apply !no-underline flex flex-col justify-between cursor-pointer my-2;

            & .preview-multi {
                @apply grid gap-x-1 grid-cols-2 overflow-hidden sm:max-h-[16rem] mb-2;
            }

            & .preview-single {
                @apply flex flex-col justify-between my-auto;
            }

            & .title-and-date {
                @apply flex flex-col justify-center items-center;

                & .title {
                    @apply accent mt-0 text-center;
                }

                & date {
                    @apply secondary text-sm !no-underline;
                }
            }

            &:hover {
                & .title {
                    @apply under;
                }
            }
        }
    }

    .tv-movie-header {
        & h1 {
            @apply my-2;
        }

        & a {
            @apply my-0 no-underline;
        }

        & img {
            @apply max-w-[50%] min-w-[6rem] hobbyGridItemImage mx-auto my-0;
        }

        & .score {
            @apply text-center my-0;
        }

        & .year {
            @apply secondary my-0;
        }
    }

    & .tv-movie-header-image {
        @apply flex-col justify-center items-center mb-4 md:mb-12;

        & a {
            @apply my-0;
        }

        & .average {
            @apply text-center;
        }
    }

    .tv-movie-reviews {
        @apply flex-col;

        & .reviews {
            @apply mt-1 justify-between w-full;

            & .review {
                @apply justify-start w-full;

                & h2 {
                    @apply text-lg mt-0 mb-2;
                }

                & .score-and-date {
                    @apply flex-row justify-between items-baseline;

                    & a {
                        @apply text-sm;
                    }
                }
            }
        }

        & hr {
            @apply !flex my-4;

            &:is(:last-of-type, :not(:first-of-type)) {
                @apply hidden;
            }
        }
    }

    .photo-page {
        @apply justify-center items-center p-0 m-0;

        & nav {
            @apply absolute top-0 left-0 right-0;
        }

        & .img-container {
            @apply absolute top-[5rem] md:top-[6rem] bottom-[11rem] left-0 right-0 flex-1 justify-center items-center w-full p-2 pt-4 md:p-8 overflow-hidden;

            & img {
                @apply w-full h-full object-contain p-0 m-0;
            }
        }

        & .buttons-and-text {
            @apply absolute bottom-4 left-0 right-0 flex mx-auto justify-end items-center width-control h-[10rem];

            & .description {
                @apply w-full text-center mt-4 mb-0;
            }

            & .tags-list {
                @apply my-1;
            }

            & .tag {
                @apply !text-accent dark:!text-accent-dark !decoration-accent dark:!decoration-accent-dark;
            }

            & .nav {
                @apply flex-row w-full justify-evenly items-center my-0;

                & .arrow {
                    @apply link no-underline h-8 w-8 justify-center items-center text-lg m-0;
                }
            }

            & .links {
                @apply flex-row w-full justify-center items-baseline;

                & a {
                    @apply mx-0 my-0;
                }
            }
        }
    }

    .interests-grid {
        @apply grid gap-x-4 gap-y-6 mx-auto px-0 grid-cols-2 sm:grid-cols-3 mt-2;

        .interest {
            @apply justify-between items-center;

            img {
                @apply border-hover-accent my-0 max-h-[10rem] w-auto;
            }
        }
    }

    .games-grid {
        @apply grid gap-x-4 gap-y-6 mx-auto px-0 grid-cols-2 sm:grid-cols-3 mt-2;

        .game {
            img {
                @apply border-hover-accent my-0;
            }
        }
    }

    .game-page-data {
        @apply flex-col justify-center items-center;

        a {
            @apply my-4;
        }

        .game-stats {
            @apply my-6;
        }
    }

    .game-achievement {
        @apply flex flex-row my-2;

        .image-container {
            @apply flex-1 max-w-[4rem] md:max-w-[6rem];
        }

        h3,
        p {
            @apply my-0;
        }

        time {
            @apply secondary min-w-[10ch] text-right;
        }

        .left {
            @apply flex-1 flex-col justify-between mx-4 py-2;
        }

        .name-and-description {
            @apply flex-1 flex-col justify-start;
        }

        .right {
            @apply flex-col justify-between items-end pt-3;
        }

        .secondary {
            @apply w-full;
        }

        .special {
            @apply ml-2;
        }
    }

    .number-stats {
        @apply flex-row justify-around items-center w-full;

        .number-stat {
            @apply flex-col justify-center items-center;

            p {
                @apply text-center my-0;
            }

            .numbers {
                @apply text-4xl md:text-5xl;
            }

            .label {
                @apply text-lg;
            }
        }
    }

    #search {
        & .pagefind-ui {
            @apply block relative mt-8;
        }

        & .pagefind-ui__form {
            @apply flex flex-col w-full;
        }

        & .pagefind-ui__search-input {
            @apply absolute top-0 left-0 w-full bg-[#FCFCFC] dark:bg-[#030303] text-text dark:text-text-dark border-border border-2 dark:border-border-dark rounded-lg px-4 h-16;

            &::placeholder {
                @apply text-text dark:text-text-dark;
            }
        }

        & .pagefind-ui__search-clear {
            @apply absolute right-4 h-16 secondary;
        }

        & .pagefind-ui__drawer {
            @apply mt-[4.5rem] mx-2 left-0 w-full;
        }

        & .pagefind-ui__message {
            @apply my-2;
        }

        & .pagefind-ui__results {
            @apply flex flex-col list-none;
        }

        & .pagefind-ui__result {
            @apply border-border dark:border-border-dark border-t-2 mt-2 pt-4 mb-4;
        }

        & .pagefind-ui__result-link {
            @apply text-accent dark:text-accent-dark decoration-accent dark:decoration-accent-dark under;
        }

        & .pagefind-ui__result-image {
            @apply max-h-[24rem] w-full object-contain;
        }
    }

    .league-champ-note {
        @apply my-4;

        h3 {
            @apply mt-0 mb-2;
        }

        p {
            @apply ml-4 my-0;
        }

        span {
            @apply inline-block secondary mr-2 w-3;
        }
    }
}
